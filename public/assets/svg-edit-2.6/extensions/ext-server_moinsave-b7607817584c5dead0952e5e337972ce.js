svgEditor.addExtension("server_opensave",{callback:function(){{var e="/+modify";$('<iframe name="output_frame" src="#"/>').hide().appendTo("body")}svgEditor.setCustomHandlers({save:function(t,a){var n='<?xml version="1.0"?>\n'+a,i=$.param.querystring(),d=i.substr(9).split("/+get/")[1],o=svgedit.utilities.encode64(n);$("#export_canvas").length||$("<canvas>",{id:"export_canvas"}).hide().appendTo("body");var p=$("#export_canvas")[0];p.width=svgCanvas.contentW,p.height=svgCanvas.contentH,$.getScript("canvg/canvg.js",function(){canvg(p,n,{renderCallback:function(){{var t=p.toDataURL("image/png"),a=(svgEditor.uiStrings,svgedit.utilities.encode64(t));$("<form>").attr({method:"post",action:e+"/"+d,target:"output_frame"}).append('<input type="hidden" name="png_data" value="'+a+'">').append('<input type="hidden" name="filepath" value="'+o+'">').append('<input type="hidden" name="filename" value="drawing.svg">').append('<input type="hidden" name="contenttype" value="application/x-svgdraw">').appendTo("body").submit().remove()}}})}),alert("Saved! Return to Item View!"),top.window.location="/"+d}})}});