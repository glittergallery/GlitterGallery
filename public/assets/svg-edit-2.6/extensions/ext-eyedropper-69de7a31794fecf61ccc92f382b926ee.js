svgEditor.addExtension("eyedropper",function(e){function t(e){var t=i.getMode();if("eyedropper"!=t){var o=null,r=$("#tool_eyedropper");!e.multiselected&&e.elems[0]&&-1==$.inArray(e.elems[0].nodeName,["svg","g","use"])?(o=e.elems[0],r.removeClass("disabled"),s.fillPaint=o.getAttribute("fill")||"black",s.fillOpacity=o.getAttribute("fill-opacity")||1,s.strokePaint=o.getAttribute("stroke"),s.strokeOpacity=o.getAttribute("stroke-opacity")||1,s.strokeWidth=o.getAttribute("stroke-width"),s.strokeDashArray=o.getAttribute("stroke-dasharray"),s.strokeLinecap=o.getAttribute("stroke-linecap"),s.strokeLinejoin=o.getAttribute("stroke-linejoin"),s.opacity=o.getAttribute("opacity")||1):r.addClass("disabled")}}var i=(e.svgcontent,e.svgroot.parentNode.ownerDocument,svgEditor.canvas),o=svgedit.history.ChangeElementCommand,r=function(e){i.undoMgr.addCommandToHistory(e)},s={fillPaint:"red",fillOpacity:1,strokePaint:"black",strokeOpacity:1,strokeWidth:5,strokeDashArray:null,opacity:1,strokeLinecap:"butt",strokeLinejoin:"miter"};return{name:"eyedropper",svgicons:"/assets/svg-edit-2.6/extensions/eyedropper-icon.xml",buttons:[{id:"tool_eyedropper",type:"mode",title:"Eye Dropper Tool",key:"I",events:{click:function(){i.setMode("eyedropper")}}}],selectedChanged:t,elementChanged:t,mouseDown:function(e){var t=i.getMode();if("eyedropper"==t){var a=e.event,n=a.target;if(-1==$.inArray(n.nodeName,["svg","g","use"])){var l={},d=function(e,t,i){l[t]=e.getAttribute(t),e.setAttribute(t,i)};s.fillPaint&&d(n,"fill",s.fillPaint),s.fillOpacity&&d(n,"fill-opacity",s.fillOpacity),s.strokePaint&&d(n,"stroke",s.strokePaint),s.strokeOpacity&&d(n,"stroke-opacity",s.strokeOpacity),s.strokeWidth&&d(n,"stroke-width",s.strokeWidth),s.strokeDashArray&&d(n,"stroke-dasharray",s.strokeDashArray),s.opacity&&d(n,"opacity",s.opacity),s.strokeLinecap&&d(n,"stroke-linecap",s.strokeLinecap),s.strokeLinejoin&&d(n,"stroke-linejoin",s.strokeLinejoin),r(new o(n,l))}}}}});